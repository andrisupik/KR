<app-shared-loader *ngIf="loading$ | async"></app-shared-loader>
<ng-container *ngIf="(loading$ | async) === false">
    <div class="wrapper mt-3">
        <div class="mx-5 px-4">
            <h3 class="fw-medium">Профіль каналу:</h3>
            <ul>
                <li>ID каналу: {{ channel.id }}</li>
                <li>Назва каналу: {{ channel.name }}</li>
            </ul>

            <ng-container *ngIf="((user$ | async)?.roles || []) | validateRoles: UserRole.Admin">
                <button
                    mat-raised-button
                    class="details-button"
                    color="accent"
                    (click)="editProgram()">
                    Редагувати програми
                </button>

                <button
                    mat-raised-button
                    class="details-button"
                    color="accent"
                    (click)="editChannel()">
                    Редагувати канал
                </button>

                <button
                    mat-raised-button
                    class="details-button"
                    color="warn"
                    (click)="deleteChannel()">
                    Видалити канал
                </button>
            </ng-container>
        </div>
        <mat-tree #tree [dataSource]="dataSource" [treeControl]="treeControl" class="example-tree">
            <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
                <div class="mat-tree-node">
                    <button mat-flat-button color="primary" matTreeNodeToggle>
                        <mat-icon class="mat-icon-rtl-mirror m-0">
                            {{ treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right' }}
                        </mat-icon>
                    </button>
                    <span class="mx-2">{{ node.name | date: 'EEEE' | titlecase }}</span>
                </div>
                <div [class.example-tree-invisible]="!treeControl.isExpanded(node)" role="group">
                    <ng-container matTreeNodeOutlet></ng-container>
                </div>
            </mat-nested-tree-node>
            <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
                <button
                    mat-raised-button
                    class="show-button"
                    color="primary">
                    {{ node.name | titlecase }} <br>
                    {{ node.startTime }} - {{ node.endTime }}
                </button>
            </mat-tree-node>
        </mat-tree>
    </div>
</ng-container>

